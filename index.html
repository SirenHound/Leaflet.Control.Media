<!DOCTYPE html>
<html>
<head>
<title>Leaflet Control Media</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css">
<style>
#map { height: 500px; }
</style>
<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.4.10/leaflet.draw.js"></script>
<script src="https://elfalem.github.io/Leaflet.curve/leaflet.curve.js"></script>
<!--//<script src="script/leaflet.curve.edit.js"></script>
<script src="script/leaflet.draw.curve.js"></script>
	<script src="script/leaflet.curve.edit.js"></script>//-->
<script src="leaflet.control.media.js"></script>

</head>
<body>
<div id='map'></div>
<script>

//set up map
var map = L.map('map').setView([46.05, 11.05], 5);
L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(map);

//Stick a draw toolbar in there
var editableGroup = new L.FeatureGroup().addTo(map);
var drawControl = new L.Control.Draw(map);//, {edit: {featureGroup: editableGroup}})
drawControl.addTo(map);
map.on(L.Draw.Event.CREATED, function(e){
	editableGroup.addLayer(e.layer);
});

//quadratic bezier curve
var pathOne = L.curve(['M',[50.14874640066278,14.106445312500002],
					   'Q',[51.67255514839676,16.303710937500004],
						   [50.14874640066278,18.676757812500004],
					   'T',[49.866316729538674,25.0927734375]], {animate: 3000}).addTo(map);

//cubic bezier curve (and straight lines)
var pathTwo = L.curve(['M',[50.54136296522163,28.520507812500004],
					   'C',[52.214338608258224,28.564453125000004],
						   [48.45835188280866,33.57421875000001],
						   [50.680797145321655,33.83789062500001],
					   'V',[48.40003249610685],
					   'L',[47.45839225859763,31.201171875],
						   [48.40003249610685,28.564453125000004],'Z',
					   'M',[49.55372551347579,29.465332031250004],
					   'V',[48.7822260446217],
					   'H',[33.00292968750001],
					   'V',[49.55372551347579],'Z'],{color:'red',fill:true}).addTo(map);



var pathThree = L.curve(['M',[49.35375571830993,6.240234375],
						 'Q',[49.38237278700955,9.843750000000002],
							 [47.754097979680026,9.360351562500002],
							 [46.95026224218562,6.635742187500001],
							 [45.67548217560647,8.437500000000002],
							 [44.5278427984555,5.5810546875],
							 [45.85941212790755,3.0761718750000004],
							 [47.517200697839414,4.218750000000001],
							 [49.009050809382074,3.7353515625000004],
							 [48.45835188280866,5.800781250000001],
							 [48.8936153614802,5.493164062500001],'Z'], {fill:true, color:'orange'}).addTo(map);

var pathFour = L.curve(['M',[46.86019101567027,-29.047851562500004],
					   'Q',[50.48547354578499,-23.818359375000004],
						   [46.70973594407157,-19.907226562500004],
					   'T',[46.6795944656402,-11.0302734375]], {dashArray: 5, animate: {duration: 3000, iterations: Infinity}}).addTo(map);

    // TODO Store these, in a database or something... or file, la de da
    // . used to denote area range smaller than a city
var bannerPath = L.polyline([
	//------- (Start) The Incredible Hulk ------------
	[42.3754942,-71.1189008],   // .Harvard University
	[38.871861,-77.0584556],    // .Pentagon
	[-11.4430331,-55.2735656],  // Brazil
	[15.2612783,-90.9965361],   // Guatamala
	[37.5247764,-77.5633012],   // Culver University, Virginia. (fictitious)
	[37.5698971,-77.485054],    // Stanley's Pizza, Virginia. (fictitious)
	[37.5247764,-77.5633012],   // Culver University, Virginia. (fictitious)
	[35.6123966,-83.4646095],   // Smoky Mountain Forest Tennessee/North Carolina
	[40.8200857,-73.9493677],   // Grayburn College, NYC Uptown (fictitious, putting it on 'The City College of New York')
	[40.8100246,-73.9500815],   // .Apollo Theatre Harlem, NYC
	[52.3721929,-126.754034],   // Bella Coola, BC, Canada
	//-------(End) The Incredible Hulk ------------
	//-------(Start) Avengers -----------------
	[22.5737435,88.3649086],    // .Kolkata (Calcutta), India
	[30.0720417, -39.35141],    // Helicarrier (fictitious) Open ocean (Quinjet took a while to take Cap and Coulson from NYC)
    // Quinjet goes over snowy mountains from Studgardt(no snow) Germany, also no snow in "Shakespeare in the Park"
    [48.215898, 23.003172],     // Approx Possible location on map while Stark is planting his bugs
    // Over land when Banner Hulks, Fury tries to get over water, going south (Put the rising sun on the left)
    
	// ... Helicarrer hyjinx
	// Abandoned warehouse en route to NYC
	[40.7535259, -73.9772662],   // NYC around Stark Tower
	[40.7514893,-73.9743],       // Schwarma Joint about 2 blocks from Stark Tower
	//-------(End) Avengers -----------------
	[40.7535259, -73.9772662],  // .Avengers Tower (fictitious) Metlife Building (A:AOU)
	//-------(Start) Avengers: Age of Ultron -----------------
	// Strucker's Base, Sokovia (fictitious) Eastern Europe appears to be around north east Italy (CA:CW)
	[40.7535259, -73.9772662],  // .Avengers Tower (fictitious) Party
	[-18.2609507, 49.4351305],  // African coast (Madagascar?) to track the vibranium (influenced by Scarlet Witch)
	[-26.1831619,28.0894531],   // Johannesburg (fight with Stark)

    // Hawkeye's Safehouse (fictitious) at least a 'few hours out' from Johannesburg by Quinjet
    // Check time of year, weather conditions etc

	[40.7535259, -73.9772662],  // Avengers Tower (fictitious) Creation of Vision
	[46.6110521, 12.6056186],   // Strucker's Base, Sokovia (fictitious) Rescue Black Widow 1:27:27
	[46.7559747, 12.5284309]    // Novi Grad, Sokovia (fictitious)
    
	// Quinjet (fictitious), (to dispatch Ultron)
	// Something falls in the Banda Sea ? Misdirection? (its a long way from Eastern Europe, and there was no confirmation)
	//-------(End) Avengers: Age of Ultron -----------------
	// Wormhole to Sakaar
	//-------(Start) Thor: Ragnarok -----------------
	// Offworld hyjinx (currently out of project scope)
	//-------(End) Thor: Ragnarok -----------------
	//-------(Start) Avengers: Infinity War -----------------
	// Sanctum Santorum (fictitious), 177A Bleecker Street NYC
	// Wakanda (fictitious) via Quinjet w/Rhodey
	//...
],
{
    animation: {
        duration: 10000,
        iterations: Infinity
    },
    dashArray: 5,
});
bannerPath.addTo(map);

function onMapClick(e) {
    console.log(e.latlng);
}
//map.on('click', onMapClick);
	var animations = [{
	    animation:function(timestamp){
		var r = 0.3; //radians per second
		var pt = this.map.latLngToLayerPoint(this.latlng).add(L.point(Math.cos(r * timestamp/1000), Math.sin(r * timestamp/1000)).multiplyBy(100));
		this.marker.setLatLng(this.map.layerPointToLatLng(pt));
	    },
	   context:{map: map, latlng:map.getCenter(), marker: L.marker(map.getCenter()).addTo(map)}
  	}]
	var mediaControl = new L.Control.Media({animations:animations}).addTo(map);

</script>
</body>
</html>
